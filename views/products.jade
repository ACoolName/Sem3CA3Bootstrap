extends layout
block content
    script.
        // DOM Ready =============================================================
        $(document).ready(function() {
            // Populate the user table on initial page load
            populateTable();
        });
                // Functions =============================================================
                // Fill table with data
        function populateTable() {
            // Empty content string
            var tableContent = '';
            // jQuery AJAX call for JSON
            $.getJSON( '/products/all', function( data ) {
                function compare(a,b) {
                if (a._id < b._id)
                    return -1;
                if (a._id > b._id)
                    return 1;
                return 0;
                }
                data.sort(compare);
                $.each(data, function(){
                    tableContent += '<tr>';
                    tableContent += '<td>' + this._id + '</td>';
                    tableContent += '<td>' + this.name + '</td>';
                    tableContent += '<td>' + this.categoryId + '</td>';
                    tableContent += '<td>' + this.unitPrice + '</td>';
                    tableContent += '<td>' + this.unitsInStock + '</td>';
                    tableContent += '<td>' + this.quantityPerUnit + '</td>';
                    tableContent += '<td>' + this.unitsOnOrder + '</td>';
                    tableContent += '<td>' + this.reorderLevel + '</td>';
                    tableContent += '</tr>';
                });
                        // Inject the whole content string into our existing HTML table
                $('#orderViewer table tbody').html(tableContent);
            });
        }
    div.container
        div
            h1= title
        div
        #orderViewer
            table(class="table table-striped table-hover")
                thead
                    th ID
                    th Name
                    th CategoryID
                    th Unit Price
                    th Units in stock
                    th Quantity/unit
                    th Units in order
                    th Reorder Level
                tbody
        // /USER LIST
